---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('posts');
const recentPosts = posts
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<Base title="Akshar Gupta">
  <h1>Akshar Gupta</h1>
  <p>
    Technical content developer working at the intersection of AI and course design.
    I write about technology, education, reading, and origami.
  </p>

  <h2>Recent Posts</h2>
  {recentPosts.length > 0 ? (
    <ul class="post-list">
      {recentPosts.map((post) => (
        <li>
          <a href={`/posts/${post.id}`}>{post.data.title}</a>
          <div class="post-date">
            {post.data.date.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            })}
          </div>
        </li>
      ))}
    </ul>
  ) : (
    <p>No posts yet.</p>
  )}
  <p><a href="/posts">View all posts &rarr;</a></p>
</Base>
